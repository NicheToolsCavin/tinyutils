# Agent Task Checklist

Shared tracker so agents can see which work items are planned, in progress, or finished - and how plans have evolved.

## How to Use
- **Append-only:** Add new tasks to the top of the relevant table (newest first).
- **Always timestamp:** Record Europe/Madrid (CET) timestamps for new entries and status changes.
- **Reference the source:** Link each task to the session ID / plan entry that created it (e.g., `rollout-2025-11-04T16-26-36-...`).
- **Update status promptly:** When a task is completed, move it to the Completed section with evidence pointers. If a task becomes obsolete, mark it as "Superseded" with the reason.
- **Plan changes:** Log scope or approach changes under Plan Updates and cross-reference the affected task.
- **Helper script:** Use `python scripts/add_task_checklist_entry.py --help` to insert rows and plan updates quickly.

## Active Tasks (Newest First)

| Task | Source (Session / Date) | Status | Notes / Evidence / Plan Changes |
| PR3 - Trust surfaces (About & Contact) | manual-2025-11-16 CET | Completed | âœ… Added about.html/contact.html trust pages plus About/Contact nav/footer links and sitemap.xml entries, with no changes to CMP/consent, adsense-monitor.js, vercel.json, or APIs. Evidence: artifacts/phase1-trust-pages/20251116/. |
| PR3 - Trust surfaces (About & Contact) | manual-2025-11-16 CET | Open | ðŸ”Ž Plan: add about.html/contact.html with simple copy, wire About/Contact into header/footer across core shells/tools, and add sitemap entries without touching CMP/consent, adsense-monitor, vercel.json, or APIs. Evidence: artifacts/phase1-trust-pages/20251116/. |
| CMP script on cookies page | manual-2025-11-16 CET | Completed | âœ… Added the standard Google AdSense tag to cookies.html so Funding Choices / CMP code is loaded on the Cookie & privacy settings page as well, making the 'Review Google analytics & ads choices' button able to call googlefc.showRevocationMessage() when the CMP is active. Evidence: artifacts/pr-c-consent/20251116/. |
| Adblock toast false-positive fix | manual-2025-11-16 CET | Completed | âœ… Updated scripts/adsense-monitor.js to consider any truthy window.adsbygoogle as a successful AdSense init, so the 'Ads seem blocked' toast only appears when AdSense never initialized at all. This avoids warning users when ads are actually visible. Evidence: artifacts/pr-c-consent/20251116/. |
| Google CMP reopen + cookies page wiring | manual-2025-11-16 CET | Completed | âœ… Aligned TinyUtils with Google Funding Choices: scripts/consent.js no longer exposes tuConsent.reopen or runs custom EU heuristics; cookies.html now wires its 'Review' button to googlefc.showRevocationMessage via googlefc.callbackQueue, and scripts/adsense-monitor.js no longer reads tu-consent. Preview/prod smokes queued with evidence under artifacts/pr-c-consent/20251116/. |
| Switch to Google Funding Choices CMP | manual-2025-11-15 CET | Completed | âœ… Removed the custom EU language/timezone consent banner and wired the official Google Funding Choices CMP script (pub-3079281180008443) into index.html and the key tool shells (tools/, DLF, Sitemap Delta, Wayback Fixer, Converter). scripts/consent.js now only handles the local tu-ads-hidden toggle and tuConsent.reopen() calls googlefc.showDialog() when available, so /cookies.html can reopen the Google three-option banner. Preview smokes and converter smokes against the PR preview are green; main will pick this up after the next deploy. |
| Converter formats card + ad toast copy | manual-2025-11-15 CET | Completed | âœ… Moved the long Supported formats box on /tools/text-converter/ into a collapsible card below the main converter UI, and softened the anti-adblock toast copy so it clearly says ads help with hosting/dev costs while the tools still work if ads remain blocked. No converter API changes; behavior logged in tool_desc_converter.md. Evidence: artifacts/converter-ux-tweaks/20251115/. |
| PR #34 â€“ post-merge production smokes | manual-2025-11-15 CET | Completed | âœ… Ran scripts/preview_smoke.mjs and scripts/smoke_convert_preview.mjs against production (https://www.tinyutils.net) after merging PR #34. Result: Preview smoke PASS for /, /tools/*, /cookies.html and all 4 APIs; converter smoke PASS with artifacts in artifacts/pr-b-prod-smoke/20251115/ and artifacts/convert/20251115/. This confirms PR Bâ€™s cookie/privacy surface and Converter UI refinements are live and healthy in prod. |
| PR #34 â€“ cookies.html 404 fix + final green smokes | manual-2025-11-15 CET | Completed | âœ… Fixed /cookies.html 404 on PR #34 preview by committing cookies.html to the PR branch (it was previously untracked locally, so not deployed). vercel.json remains headers-only. Re-ran scripts/preview_smoke.mjs and scripts/smoke_convert_preview.mjs against the refreshed PR preview (https://tinyutils-git-fix-pr-b-cookie-c-9dd0a8-cavins-projects-7b0e00bb.vercel.app); result: Preview smoke PASS for /, /tools/*, /cookies.html and all four APIs, and converter smoke PASS with existing artifacts under artifacts/pr-b-vercel-fix/20251115/ and artifacts/convert/20251115/. |
| PR #34 â€“ Vercel pdfminer fix + preview smokes | manual-2025-11-15 CET | Completed | âœ… Fixed PR #34 preview build by dropping the explicit pdfminer.six constraint so pdfplumber can install its compatible version; converter deps now install and layout-aware APIs import cleanly. Preview_smoke against PR preview is still FAIL due only to /cookies.html 404, while /, /tools/* and all 4 APIs return 200/JSON. Converter smoke (smoke_convert_preview.mjs) PASS with artifacts in artifacts/pr-b-vercel-fix/20251115/ and artifacts/convert/20251115/. |
| Converter PR B Phase 2 â€” UI refinements | manual-2025-11-15 19:11 CET | Completed | âœ… Implemented single-target default + advanced multi-export in tools/text-converter/index.html, aligned Markdown dialect selector with backend allowlist, and added PDF-specific progress summaries based on pdf_* logs while keeping the /api/convert payload contract unchanged. Evidence: artifacts/converter-prb-ui/20251115/. |
| PR B Phase 1 â€” Cookie & privacy settings page | manual-2025-11-15 19:06 CET | Completed | âœ… Added cookies.html with policy-compliant copy, wired header/footer links across shells, exposed tuConsent.reopen in consent.js, extended preview_smoke to /cookies.html, and updated privacy + TEST_PLAN_SITE. Preview/prod will serve the page after the next deploy; current smoke shows 404 for /cookies.html only. |
| Prod deploy + smoke for www.tinyutils.net | manual-2025-11-15 18:43 CET | Completed | âœ… Merged PR #33 to main, then ran scripts/preview_smoke.mjs against https://www.tinyutils.net with automation bypass; all pages and APIs 200/JSON with request-id. Evidence: artifacts/prod-smoke/20251115/. |
| Fix heading thresholds type annotation | manual-2025-11-15 18:37 CET | Completed | âœ… Updated HEADING_SIZE_THRESHOLDS to Tuple[Tuple[float,int], ...] and confirmed converter modules compile; no behavior change. Evidence shares preview-smoke artifacts for context. |
| Address review fixes + smokes | manual-2025-11-15 18:29 CET | Completed | âœ… Added pdfplumber requirement, cleaned heading heuristics, scrubbed smoke_pdf_new.sh, regenerated Context-from-Repo.md, and reran preview+converter smokes. Commits: pending. Evidence: artifacts/preview-smoke/20251115/review-feedback/, artifacts/convert/20251115/preview-smoke-20251115062851/ |
| Refresh agent context & rules digest | manual-2025-11-15 CET | Completed | âœ… Re-read AGENTS.md, CHATGPT*, SECURITY, run log, checklist, converter spec, and PDFâ†’MD refactor plan; summarized key rules for this session. Evidence: artifacts/agent-context/20251115/. |
| Headless preview fallback | manual-2025-11-15 19:10 CET | Completed | âœ… Ran scripts/headless_preview_fallback.mjs to snapshot /, /tools/, /tools/text-converter/ when preview is gated; summary+HTML lives in artifacts/agent-mode/20251115/headless-preview/. |
| Plan checkpoint update | manual-2025-11-15 18:55 CET | Completed | âœ… Added PR A completed checkpoint to pdf-md-refactor-plan-2025-11-14.md with artifact links and future candidates. Evidence: ../pdf-md-refactor-plan-2025-11-14.md |
| Converter automated tests | manual-2025-11-15 18:45 CET | Completed | âœ… npm test (node --test) completes covering convert/check/metafetch/WBF; log available in artifacts/tests/20251115/npm-test.log. |
| Agent-assisted runbook | manual-2025-11-15 18:20 CET | Completed | âœ… Added runbook section for Agent Mode, Deep Research, Pro Reasoning + artifact logging instructions. Evidence: docs/AGENT_ASSISTED_PROMPTS.md |
| PDF fixture validation | manual-2025-11-15 18:00 CET | Completed | âœ… Ran convert_one on table-heavy and bookdown PDFs; verified outputs, media zip, and logs/meta for pdf_engine, layout mode, tables/images counts. Evidence: artifacts/convert/test-fixtures |
| QA audit follow-ups (size limits, downloads, progress guidance) | manual-2025-11-15 17:15 CET | Completed | âœ… Verified size limit messaging, HTTP downloads, and progress indicators for converter. Evidence: artifacts/convert/20251115/qa-followup/ |
| QA audit follow-ups (size limits, downloads, progress guidance) | manual-2025-11-15 16:25 CET | Open | ðŸ”Ž Add explicit size-limit messaging, enforce HTTP downloads for converter outputs, and capture progress/tooltip feedback per the Nov 15 audit. Evidence: docs/TEST_PLAN_SITE.md, docs/UX_REDESIGN_PLAN.md, docs/AGENT_ASSISTED_PROMPTS.md |
| Clarify AGENTS constraints | manual-2025-11-15 15:45 CET | Completed | âœ… Updated AGENTS.md: vercel header rule now owner-approved for relaxations, removed rigid dependency restriction, added PR comment review cadence. Evidence: AGENTS.md |
| Create Supported Formats page + link + ODT output | manual-2025-11-15 CET | Completed | âœ… New page at /tools/formats/; tools index link; converter adds ODT output; sitemap updated. Evidence: tools/formats/index.html |
| Expose ODT output + Supported formats section + preview bypass callout | manual-2025-11-15 CET | Completed | âœ… Added ODT target; UI lists ODT; new Supported formats section; AGENTS.md loud preview bypass note. Evidence: converter service + UI file. |
| Phase 3 â€” Text Converter UI + Converter smokes | manual-2025-11-15 CET | Completed | âœ… UI single-select + advanced toggle; dialect expansion; PDF progress copy. Smokes: added tiny PDF case with bypass precedence. Evidence: tools/text-converter/index.html, scripts/smoke_convert_preview.mjs |
| PDFâ†’MD refactor Phase 1â€“2 (engine guardrails) | manual-2025-11-15 CET | Completed | âœ… Added pdf_layout_mode option, timeout/memory guard, rtl meta; optional pdfplumber. Evidence: api/convert/convert_service.py, convert_types.py |
| PDFâ†’MD refactor unified plan | manual-2025-11-15 CET | Completed | âœ… Plan saved at tinyutils/artifacts/pdf-md-refactor/20251115/unified_plan.md |
| Fix preview smoke bypass handshake | manual-2025-11-15 08:29 CET | Completed | âœ… Updated scripts/preview_smoke.mjs to handshake with Vercel protection tokens, then reran the smoke test. Commits: 959faf2. Evidence: tinyutils/artifacts/preview-green/20251115/preview_smoke.after_automation.log |
| Preview GREEN verification (JWT) | manual-2025-11-15 CET | Completed | âœ… All pages/APIs 200 using SSO cookie (_vercel_jwt). Evidence: tinyutils/artifacts/preview-green/20251115/manual |
| Preview smoke run (PR #33) | manual-2025-11-15 CET | Completed | Smoke FAIL. Evidence: tinyutils/artifacts/preview-green/20251115 |
| /plan â€” PR #33 unified preview plan | manual-2025-11-15 CET | Completed | âœ… Synthesized multi-agent plan. Evidence: artifacts/plan/20251115/final_plan.md |
| PR33 preview monitor + status comment | manual-2025-11-15 CET | Open | âœ… Comment posted; polling for preview URL via scripts/poll_preview_url.sh. Evidence: docs/AGENT_RUN_LOG.md. |
| Vercel preview pass: enforce headers-only vercel.json | manual-2025-11-15 CET | Completed | âœ… Removed rewrites block from vercel.json. Evidence: tinyutils/artifacts/convert/20251115/vercel_before.json, vercel_after.json |
| Author comprehensive site test plan + GCP cost safety checklist | manual-2025-11-14 CET | Completed | âœ… Added docs/TEST_PLAN_SITE.md and docs/GCP_COST_SAFETY.md; added scripts/gcp_cost_guard.sh (read-only audit). Evidence: artifacts listed in AGENT_RUN_LOG.md. |
| Expose PDF in Converter UI; fix RTF 400 | manual-2025-11-14 CET | Completed | âœ… UI adds PDF checkbox; backend now supports RTF target. Evidence: tinyutils/artifacts/text-converter/20251114/patch_pdf_rtf_ui_backend.diff; smoke payloads saved. Branch: fix/converter-pdf-rtf-ui-testplan-gcp |
| Fix converter PDF upload (UI+server) | manual-2025-11-14 CET | Completed | âœ… UI+server patched. Evidence: artifacts/pdf-fix/20251114/notes.txt |
| Link wrapper CODE_HOME configs | manual-2025-11-14 CET | Completed | âœ… Symlinked each `.code-teams-*` directory to share `.code/config.toml`, ensuring the wrappers load the same agent profile; evidence: artifacts/agent-config-change/20251114/summary.txt |
| Enable code-gpt-5 agent | manual-2025-11-14 CET | Completed | âœ… Enabled code-gpt-5 in code_config_hacks/.code/config.toml so it picks up the shared mcp profile; evidence: artifacts/agent-config-change/20251114/summary.txt |
| Enable MCP profile for code agents | manual-2025-11-14 CET | Completed | âœ… Added mcp profile + context7/sequential MCP definitions and taught all code agents to pass `-p mcp`; evidence: artifacts/agent-config-change/20251114/summary.txt |
| Fix PR#28 code review issues (cache key, validation, code quality) | manual-2025-11-14 CET | Completed | âœ… Fixed 6 issues: (1) Added md_dialect to cache key, (2-3) Verified LaTeX detection correct, (4) Added md_dialect validation, (5) Removed unused variable, (6) Replaced magic strings. Commit: a72865c. All fixes pushed to PR#28 branch. |
| Fix converter HTML conversion bugs (truncation, semantic elements, UX) | manual-2025-11-14 CET | Completed | âœ… Fixed 4 bugs: (1) HTMLâ†’Plain Text truncation via direct conversion path, (2) HTMLâ†’HTML stray code blocks, (3) HTMLâ†’Markdown figure/figcaption via Lua filter, (4) Results table race conditions. UX: Smart disable logic for Extract Media & Accept Tracked Changes. UI: Updated text to reflect 100+ format support. Commits: 76e911d, 42c0866, 90e6fb5. Codex re-test: ALL GREEN âœ…. Evidence: tinyutils/artifacts/text-converter/20251114/retest-2.txt |
| Fix environment variable whitespace (BLOB_READ_WRITE_TOKEN, PDF_RENDERER_URL, CONVERTER_SHARED_SECRET) | manual-2025-11-13 13:53 CET | Completed | âœ… Added .strip() calls to 3 env vars in blob.py and _pdf_external.py. Fixed "Invalid header value" errors. Commits: dc7e23a, 979eb0f. Also cleaned git history of 268MB artifacts file and added artifacts/ to .gitignore |
| Automated Vercel log downloading to ~/dev/TinyUtils/logs/ | manual-2025-11-12 14:25 CET | Todo | Create script/command to fetch Vercel logs automatically instead of manual fetch. Log grabber script exists at ~/dev/TinyUtils/logs/grab_logs_converter_preview.sh |
| Converter API â€” Debug remaining 500 error on POST /api/convert | manual-2025-11-12 14:25 & 16:10 CET | Completed | âœ… FIXED! 16 commits total (91e28d1â†’8dee8bd). Final solution: Copied convert modules into api/convert/ to avoid cross-package imports. Health check âœ…. POST /api/convert âœ…. Evidence: artifacts/convert/20251112/success_test_final.json |
| Enforce per-turn logging (AGENTS.md + converter heartbeat) | manual-2025-11-12 10:42 CET | Completed | AGENTS.md updated; tool_desc_converter.md heartbeat added; artifacts/convert/20251112/heartbeat/ |
| Converter â€” ZIP input (minimal) | auto-2025-11-12T10-35 CET | Completed | Safe extraction; per-member guard; supported formats only |
| Converter â€” extended Options + filters (graceful) | auto-2025-11-12T10-35 CET | Completed | normalize*/wrap/headers/ascii; runner.apply_lua_filters bestâ€‘effort; filters under /filters |
| Converter â€” preview flag + consistent manifest | auto-2025-11-12T10-35 CET | Completed | Always return preview object; signature-aware pass to convert_batch |
| Lander + sitemap â€” html-to-markdown | auto-2025-11-12T10-35 CET | Completed | Redirect + sitemap entry |
| PR4 test suites | manual-2025-11-05T01-29 | Completed | Artifacts: tinyutils/artifacts/pr4-tests/20251105/ |
| PR3 preview fence evidence | manual-2025-11-05T00-49 | Completed | Preview smoke PASS; 401â†’200 curl captures and cookies stored in tinyutils/artifacts/pr3-fence/20251105/. |
| PR2 noindex + debug hook | manual-2025-11-05T00-14 | Completed | Meta shells now carry noindex meta; DLF debug paragraph has data-testid. Evidence: tinyutils/artifacts/pr2-ux-noindex-debug/20251105/. |
| Add CSP + /public/(.*) cache rule | manual-2025-11-05T00-12 | Completed | vercel.json updated with CSP + /public cache; prod headers archived in tinyutils/artifacts/pr1-security-cache/20251105/ |
| --- | --- | --- | --- |
| Add `<meta name="robots" content="noindex">` to beta HTML shells and `data-testid="debug-scheduler"` in DLF debug paragraph (PR2) | `rollout-2025-11-04T16-26-36-da356561-8be5-4818-8e6c-7eab8f79a99a` (2025-11-04 15:29 CET) | Completed | Superseded by manual-2025-11-05T00-14 entry; evidence in tinyutils/artifacts/pr2-ux-noindex-debug/20251105/. |
| Add CSP + `/public/(.*)` cache rule, then capture production header evidence for PR1 | `rollout-2025-11-04T13-38-25-603afdb2-7fa0-4f61-8351-5e235d315571` & `rollout-2025-11-04T13-29-05-befec95e-6959-4c1c-9713-8ff902acf316` (2025-11-04 12:29-12:38 CET) | Completed | Superseded by manual-2025-11-05T00-12 entry; evidence in tinyutils/artifacts/pr1-security-cache/20251105/. |
| Import PR4 Node test suites and wire `pnpm test` | `rollout-2025-11-04T16-26-36-da356561-8be5-4818-8e6c-7eab8f79a99a` (2025-11-04 15:29 CET) | Completed | manual-2025-11-05T01-29 entry; tests restored and logs captured under tinyutils/artifacts/pr4-tests/20251105/. |
| Preview fence evidence + smoke (include docs) | `rollout-2025-11-04T16-48-41-fcfb6382-8881-4b3a-8ec3-5371fb8d6322` & outstanding plan (2025-11-04 16:26 CET) | Completed | Superseded by manual-2025-11-05T00-49 entry; docs + evidence in tinyutils/artifacts/pr3-fence/20251105/. |
| Documentation refresh to align with new tooling (README, README_DEPLOY, TESTING, DEPLOY_PRODUCTION_CHECKLIST) | `rollout-2025-11-04T16-26-36-da356561-8be5-4818-8e6c-7eab8f79a99a` (2025-11-04 15:29 CET) | Completed | manual-2025-11-05T01-33 entry; docs refreshed with PR1â€“PR4 workflows. Evidence: tinyutils/artifacts/docs-refresh/20251105/. |
| Keyboard shortcut & a11y compliance fixes in Sitemap Delta / Wayback Fixer | `rollout-2025-11-04T09-42-32-d2d99936-2fbb-46bf-963c-5ba9b250971c` (2025-11-04 08:42 CET) | Completed | Guarded shortcuts from firing while typing; audit logged under tinyutils/artifacts/a11y/20251105/audit.md. |

## Completed Tasks

| Task | Completed On (CET) | Notes / Evidence |
| --- | --- | --- |
| _None recorded yet_ |  |  |

## Plan Updates
- 2025-11-14 21:09 CET - Set workspace to write; benched teams-personal/teacher; reassigned agents; applied minimal diffs.
- 2025-11-04 13:47 CET - Preview fence commit omitted deployment evidence; tracked under "Preview fence evidence + smoke".
- 2025-11-04 13:34 CET - PR1 commit landed without CSP and `/public` cache rule; captured as follow-up in active tasks.
- 2025-11-04 08:42 CET - Compliance audit flagged keyboard shortcut conflicts; marked "Needs Review" pending verification.
| DLF Quick Extras smoke gates + artifacts | 2025-11-11 21:43 CET (UTC+0100) | Completed | Green; gating + artifacts in place |