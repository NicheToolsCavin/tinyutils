â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    WORKSTREAM 2: TEST MATRIX VISUALIZATION                      â”‚
â”‚                         Format Conversion Coverage Map                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

PRIORITY 1: Rich Format Roundtrips (Critical - Blank Output Prevention)
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ 1. ODT â†’ DOCX     âœ“ TESTED  âš ï¸  CRITICAL (blank bug fixed)                     â•‘
â•‘    Fixture: November 16-30.odt (24KB)                                          â•‘
â•‘    Guards:  suspected_blank_output=docx, stage_docx_bytes                      â•‘
â•‘    Tests:   test_convert_backend_odt_docx.py:27-58                             â•‘
â•‘                                                                                 â•‘
â•‘ 2. ODT â†’ MD       âœ“ TESTED                                                     â•‘
â•‘    Fixture: November 16-30.odt                                                 â•‘
â•‘    Guards:  min_output_bytes >= 2000                                           â•‘
â•‘    Tests:   converter_fidelity.mjs:123-143                                     â•‘
â•‘                                                                                 â•‘
â•‘ 3. DOCX â†’ DOCX    âœ“ TESTED  ğŸ”„ ROUNDTRIP                                        â•‘
â•‘    Fixture: docx_report_sample.docx (11KB)                                     â•‘
â•‘    Guards:  EXTEND blank-output detection â†’ roundtrip degradation              â•‘
â•‘    Tests:   test_convert_backend_odt_docx.py:182-211                           â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

PRIORITY 2: HTML Pipeline (Direct Path Validation)
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ 4. HTML â†’ DOCX    âš¡ NEW - EXTEND GUARDS                                        â•‘
â•‘    Fixture: html_input.html (1KB)                                              â•‘
â•‘    Guards:  ADD "html" to line 759 in convert_service.py                       â•‘
â•‘    Tests:   NEW test_html_to_docx_not_blank_preserves_tables()                 â•‘
â•‘                                                                                 â•‘
â•‘ 5. HTML â†’ MD      âœ“ TESTED                                                     â•‘
â•‘    Fixture: html_input.html                                                    â•‘
â•‘    Guards:  Metrics validation (code blocks, lists preserved)                  â•‘
â•‘    Tests:   converter_fidelity.mjs:105-121                                     â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

PRIORITY 3: Fidelity-Critical Formats (Content Preservation)
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ 6. DOCX â†’ MD      âš¡ NEW GUARDS (content loss detection)                        â•‘
â•‘    Fixtures: blog_post.docx, tech_doc.docx, report_2025_annual.docx           â•‘
â•‘    Guards:   NEW suspected_content_loss=md (if cleaned_md < 10% of input)     â•‘
â•‘    Tests:    EXTEND existing converter_fidelity.mjs tests with size checks     â•‘
â•‘                                                                                 â•‘
â•‘ 7. PDF â†’ MD       âš¡ NEW - LAYOUT-AWARE EXTRACTION                              â•‘
â•‘    Fixture:  ğŸš§ MISSING sample.pdf (need to create ~50KB tech doc)             â•‘
â•‘    Guards:   pdf_degraded=timeout|too_short, pdf_extraction_strategy           â•‘
â•‘    Tests:    NEW test_pdf_to_markdown_layout_aware()                           â•‘
â•‘                                                                                 â•‘
â•‘ 8. PDF â†’ TXT      âš¡ NEW - PLAIN TEXT FIDELITY                                  â•‘
â•‘    Fixture:  Same sample.pdf                                                   â•‘
â•‘    Guards:   NEW suspected_extraction_failure=pdf_to_txt (if < 5% of input)   â•‘
â•‘    Tests:    NEW test_pdf_to_txt_non_blank()                                   â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

PRIORITY 4: Edge Cases & Regressions
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ 9. HTML â†’ TXT     âš¡ NEW TEST (direct path already implemented)                 â•‘
â•‘    Fixture:  html_input.html                                                   â•‘
â•‘    Guards:   NEW suspected_truncation=html_to_txt (validate no regression)    â•‘
â•‘    Tests:    NEW test_html_to_txt_no_truncation()                              â•‘
â•‘                                                                                 â•‘
â•‘ 10. DOCX â†’ PDF    âš¡ NEW - REPORTLAB FALLBACK VALIDATION                        â•‘
â•‘     Fixture: tech_doc.docx (13KB)                                              â•‘
â•‘     Guards:  pdf_engine=reportlab|external (validate fallback works)           â•‘
â•‘     Tests:   NEW test_docx_to_pdf_reportlab_fallback()                         â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          SILENT-FAILURE GUARD SUMMARY                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

EXISTING GUARDS (1 active, 1 validated by tests)
  âœ“ ODT/DOCX â†’ DOCX blank detection (lines 752-768)
  âœ“ PDF extraction quality logging (lines 618-643)

PROPOSED EXTENSIONS (4 new guards)
  1. HTML â†’ DOCX blank detection      (extend line 759)
  2. Markdown content loss guard      (add after line 722)
  3. HTML â†’ TXT truncation guard      (add after line 956)
  4. DOCX roundtrip degradation guard (extend line 754-765 block)

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                             IMPLEMENTATION STATUS                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

COVERAGE SUMMARY
  Currently Tested:     7/10 combos  (70%)
  With Proposed Tests: 10/10 combos (100%)

SILENT-FAILURE DETECTION
  Currently Active:     1 guard  (ODT/DOCX â†’ DOCX)
  With Proposed Adds:   5 guards (+HTML, +MD loss, +TXT, +roundtrip)

FIXTURE GAPS
  Missing: sample.pdf (~50KB technical doc with headings/lists/code/table)
  Action:  Create 1 new fixture file

GOLDEN METRICS GAPS
  Missing: 5 new golden metric files for new test combinations
  Action:  Create JSON files with expected thresholds

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                               QUICK REFERENCE                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

KEY FILES
  convert_backend/convert_service.py        Core logic + guards (lines 99-103, 752-768)
  tests/converter_fidelity.mjs             JS metrics validation (7 tests)
  tests/test_convert_backend_odt_docx.py   Python integration tests (6 tests)
  tests/fixtures/converter/                Input fixtures (20+ files)
  tests/golden/converter/                  Expected output metrics (7 JSON files)

TELEMETRY LOG KEYS (for test assertions)
  stage_docx_bytes=<N>                    DOCX output size
  suspected_blank_output=docx             Blank DOCX warning
  suspected_content_loss=md               Markdown content loss (proposed)
  suspected_truncation=html_to_txt        HTMLâ†’TXT truncation (proposed)
  suspected_roundtrip_degradation=docx    DOCX roundtrip mismatch (proposed)
  pdf_engine=pdfminer_six|reportlab       PDF rendering engine
  pdf_degraded=timeout|too_short          PDF extraction quality warning

THRESHOLDS
  BLANK_OUTPUT_INPUT_THRESHOLD_BYTES  = 4096  (min input size to check)
  BLANK_OUTPUT_OUTPUT_THRESHOLD_BYTES = 1024  (max output before warning)
  Content loss ratio threshold         = 0.1   (warn if output < 10% of input)

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                             EXECUTION CHECKLIST                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Phase 1: Add Missing Fixtures
  [ ] Create tests/fixtures/converter/sample.pdf (2-page tech doc, ~50KB)

Phase 2: Extend Silent-Failure Guards (convert_service.py)
  [ ] Line 759: Add "html" to from_format check
  [ ] After line 722: Add markdown content-loss guard
  [ ] After line 956: Add TXT truncation guard
  [ ] In 754-765 block: Add DOCX roundtrip guard

Phase 3: Add Golden Metrics (tests/golden/converter/)
  [ ] html_input_docx.metrics.json
  [ ] sample_pdf_md.metrics.json
  [ ] sample_pdf_txt.metrics.json
  [ ] docx_report_sample_docx_roundtrip.metrics.json
  [ ] tech_doc_pdf.metrics.json

Phase 4: Add Test Cases
  [ ] Python: test_html_to_docx_not_blank_preserves_tables()
  [ ] Python: test_pdf_to_markdown_layout_aware()
  [ ] Python: test_docx_roundtrip_no_degradation()
  [ ] JavaScript: HTMLâ†’DOCX metrics validation test
  [ ] JavaScript: PDFâ†’MD metrics validation test

Phase 5: Validate & Tune
  [ ] Run full test suite (npm test && pytest)
  [ ] Check for false positives in CI logs
  [ ] Tune thresholds if needed
  [ ] Update AGENTS.md with guard locations

ESTIMATED EFFORT: ~3 hours for complete implementation

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     STATUS: READY FOR IMPLEMENTATION                            â”‚
â”‚                 All code locations identified, thresholds defined               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
